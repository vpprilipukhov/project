{"ast":null,"code":"var _jsxFileName = \"C:\\\\work_project\\\\myProject\\\\react-burger\\\\src\\\\components\\\\app\\\\app.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport styles from './app.module.css';\nimport AppHeader from \"../appHeader/appHeader\";\nimport BurgerIngredients from \"../burgerIngredients/burgerIngredients\";\nimport BurgerConstructor from \"../burgerConstructor/burgerConstructor\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nasync function getState(url, setter) {\n  const response = await fetch(url, {\n    method: 'GET'\n  });\n  return response.json();\n}\n\nconst App = () => {\n  _s();\n\n  //получение данных\n  const url = 'https://norma.nomoreparties.space/api/ingredients';\n  const [promiseMy, setPromise] = React.useState(null);\n  const [state, setState] = React.useState([]);\n  const [stateChoice, setStateChoice] = React.useState([]); //получаем промисы\n\n  React.useEffect(() => {\n    getState(url, setState).then(data => setPromise(data));\n  }, []); //при получении промисов записываем данные в state\n\n  React.useEffect(() => {\n    setState(promiseMy === null || promiseMy === void 0 ? void 0 : promiseMy.data);\n  }, [promiseMy]);\n\n  const getIdIngredients = id => {\n    const idEl = id.split('|')[0];\n    const type = id.split('|')[1];\n\n    if (type === 'name') {\n      let newIng;\n      newIng = state === null || state === void 0 ? void 0 : state.filter(el => {\n        return el._id === idEl;\n      });\n      console.log(newIng);\n      setStateChoice([newIng[0], ...stateChoice]);\n    } // onModalIngActive()\n    // onModalActive()\n\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.page,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.app_wrapper,\n      children: [/*#__PURE__*/_jsxDEV(AppHeader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(BurgerIngredients, {\n        getIdIngredients: getIdIngredients,\n        state: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(BurgerConstructor, {\n        stateChoice: stateChoice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n};\n\n_s(App, \"AcgC5Fx4RE5OP88t61HnWOhL4ZI=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","styles","AppHeader","BurgerIngredients","BurgerConstructor","getState","url","setter","response","fetch","method","json","App","promiseMy","setPromise","useState","state","setState","stateChoice","setStateChoice","useEffect","then","data","getIdIngredients","id","idEl","split","type","newIng","filter","el","_id","console","log","page","app_wrapper"],"sources":["C:/work_project/myProject/react-burger/src/components/app/app.tsx"],"sourcesContent":["import React, {FC} from 'react';\nimport styles from './app.module.css'\nimport AppHeader from \"../appHeader/appHeader\";\nimport BurgerIngredients from \"../burgerIngredients/burgerIngredients\";\nimport BurgerConstructor from \"../burgerConstructor/burgerConstructor\";\n\n\ninterface State {\n    _id: string\n    name: string\n    type: string\n    proteins: number\n    fat: number\n    carbohydrates: number\n    calories: number\n    price: number\n    image: string\n    image_mobile: string\n    image_large: string\n    __v: number\n\n\n}\n\n\ninterface PromiseMy {\n    success: boolean\n    data: any;\n}\n\n\nasync function getState(url: string, setter: Function): Promise<PromiseMy> {\n    const response = await fetch(url, {method: 'GET'})\n\n    return response.json()\n}\n\nconst App: FC = () => {\n\n    //получение данных\n    const url: string = 'https://norma.nomoreparties.space/api/ingredients'\n    const [promiseMy, setPromise] = React.useState<PromiseMy | null>(null)\n    const [state, setState] = React.useState<State[]>([])\n\n\n    const [stateChoice, setStateChoice] = React.useState<State[]>([])\n\n    //получаем промисы\n    React.useEffect(\n        () => {\n\n            getState(url, setState).then(data => setPromise(data))\n\n        }, []\n    )\n\n    //при получении промисов записываем данные в state\n    React.useEffect(\n        () => {\n\n            setState(promiseMy?.data)\n\n        }, [promiseMy]\n    )\n\n    const getIdIngredients = (id: string) => {\n        const idEl: string = id.split('|')[0]\n        const type: string = id.split('|')[1]\n\n        if (type === 'name') {\n\n            let newIng: any\n            newIng = state?.filter(el => {\n                return el._id === idEl\n            })\n            console.log(newIng)\n            setStateChoice([newIng[0], ...stateChoice])\n\n        }\n\n\n        // onModalIngActive()\n        // onModalActive()\n    }\n\n\n    return (\n        <div className={styles.page}>\n\n            <div className={styles.app_wrapper}>\n                <AppHeader/>\n                <BurgerIngredients getIdIngredients={getIdIngredients} state={state}/>\n                <BurgerConstructor stateChoice={stateChoice}/>\n            </div>\n\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAwB,OAAxB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,iBAAP,MAA8B,wCAA9B;AACA,OAAOC,iBAAP,MAA8B,wCAA9B;;;AA2BA,eAAeC,QAAf,CAAwBC,GAAxB,EAAqCC,MAArC,EAA2E;EACvE,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACH,GAAD,EAAM;IAACI,MAAM,EAAE;EAAT,CAAN,CAA5B;EAEA,OAAOF,QAAQ,CAACG,IAAT,EAAP;AACH;;AAED,MAAMC,GAAO,GAAG,MAAM;EAAA;;EAElB;EACA,MAAMN,GAAW,GAAG,mDAApB;EACA,MAAM,CAACO,SAAD,EAAYC,UAAZ,IAA0Bd,KAAK,CAACe,QAAN,CAAiC,IAAjC,CAAhC;EACA,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBjB,KAAK,CAACe,QAAN,CAAwB,EAAxB,CAA1B;EAGA,MAAM,CAACG,WAAD,EAAcC,cAAd,IAAgCnB,KAAK,CAACe,QAAN,CAAwB,EAAxB,CAAtC,CARkB,CAUlB;;EACAf,KAAK,CAACoB,SAAN,CACI,MAAM;IAEFf,QAAQ,CAACC,GAAD,EAAMW,QAAN,CAAR,CAAwBI,IAAxB,CAA6BC,IAAI,IAAIR,UAAU,CAACQ,IAAD,CAA/C;EAEH,CALL,EAKO,EALP,EAXkB,CAmBlB;;EACAtB,KAAK,CAACoB,SAAN,CACI,MAAM;IAEFH,QAAQ,CAACJ,SAAD,aAACA,SAAD,uBAACA,SAAS,CAAES,IAAZ,CAAR;EAEH,CALL,EAKO,CAACT,SAAD,CALP;;EAQA,MAAMU,gBAAgB,GAAIC,EAAD,IAAgB;IACrC,MAAMC,IAAY,GAAGD,EAAE,CAACE,KAAH,CAAS,GAAT,EAAc,CAAd,CAArB;IACA,MAAMC,IAAY,GAAGH,EAAE,CAACE,KAAH,CAAS,GAAT,EAAc,CAAd,CAArB;;IAEA,IAAIC,IAAI,KAAK,MAAb,EAAqB;MAEjB,IAAIC,MAAJ;MACAA,MAAM,GAAGZ,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEa,MAAP,CAAcC,EAAE,IAAI;QACzB,OAAOA,EAAE,CAACC,GAAH,KAAWN,IAAlB;MACH,CAFQ,CAAT;MAGAO,OAAO,CAACC,GAAR,CAAYL,MAAZ;MACAT,cAAc,CAAC,CAACS,MAAM,CAAC,CAAD,CAAP,EAAY,GAAGV,WAAf,CAAD,CAAd;IAEH,CAboC,CAgBrC;IACA;;EACH,CAlBD;;EAqBA,oBACI;IAAK,SAAS,EAAEjB,MAAM,CAACiC,IAAvB;IAAA,uBAEI;MAAK,SAAS,EAAEjC,MAAM,CAACkC,WAAvB;MAAA,wBACI,QAAC,SAAD;QAAA;QAAA;QAAA;MAAA,QADJ,eAEI,QAAC,iBAAD;QAAmB,gBAAgB,EAAEZ,gBAArC;QAAuD,KAAK,EAAEP;MAA9D;QAAA;QAAA;QAAA;MAAA,QAFJ,eAGI,QAAC,iBAAD;QAAmB,WAAW,EAAEE;MAAhC;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA;MAAA;MAAA;MAAA;IAAA;EAFJ;IAAA;IAAA;IAAA;EAAA,QADJ;AAWH,CA5DD;;GAAMN,G;;KAAAA,G;AA8DN,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}